<!DOCTYPE>
<html>
<head>
<title></title>
<meta charset="utf-8">
<!-- d3 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"
	charset="utf-8"></script>
<!-- jQuery -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!-- topoJson -->
<script src="http://d3js.org/topojson.v1.min.js"></script>
<!-- tooltipster -->
<script src="../javascript/jquery.tooltipster.min.js"></script>
<!-- data -->
<script src="seoul.js"></script>


<!-- custom css-->
<link rel="stylesheet" type="text/css" href="seoul.css">
<!-- tooltipster -->
<link rel="stylesheet" type="text/css" href="../css/tooltipster.css">

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style type="text/css">
#myModal, .modal {
	display: none; /* Hidden by default */
	position: fixed; /* Stay in place */
	z-index: 1; /* Sit on top */
	padding-top: 100px; /* Location of the box */
	left: 0;
	top: 0;
	width: 100%; /* Full width */
	height: 100%; /* Full height */
	overflow: auto; /* Enable scroll if needed */
	background-color: rgb(0, 0, 0); /* Fallback color */
	background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
}



/* Modal Content */
.modal-content {
	background-color: #fefefe;
	margin: auto;
	padding: 20px;
	border: 1px solid #888;
	width: 90%;
}

/* The Close Button */
.close {
	color: #aaaaaa;
	float: right;
	font-size: 28px;
	font-weight: bold;
}

.close:hover, .close:focus {
	color: #000;
	text-decoration: none;
	cursor: pointer;
}
</style>
<style>
#myBtn, #b1, #b2, #b3, #b4 {
	margin: auto;
	width: 20%;
	border: none;
	color: black;
	background-color: #dfdfff;
	text-align: center;
	align: center;
}
</style>
</head>

<body>

	<!-- Trigger/Open The Modal -->
	<button id="myBtn">한 눈에 보는 차트</button>

	<!-- The Modal -->
	<div id="eyeModal" class="modal">

		<!-- Modal content -->
		<div class="modal-content">
			<span class="close">&times;</span>




			<script type="text/javascript"
				src="https://www.gstatic.com/charts/loader.js"></script>

			<script type="text/javascript">
					    google.charts.load("current", {packages:['corechart']});
					
					    
					    function drawChart(TotalProfit) {
					      var data = google.visualization.arrayToDataTable(eval(TotalProfit));
					
					      var view = new google.visualization.DataView(data);
					      view.setColumns([0, 1,
					                       { calc: "stringify",
					                         sourceColumn: 1,
					                         type: "string",
					                         role: "annotation" },
					                       2]);
					      var options = {
					    	title: "Comparison of TotalProfit of Cafe in Seoul sorted by Gu",
					        width: 1200,
					        height: 450,
					        bar: {groupWidth: "95%"},
					        legend: { position: "none" },
					      };
					      var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
					      chart.draw(view, options);
					  }
					
						function drawChart(LivingPeople) {
					      var data = google.visualization.arrayToDataTable(eval(LivingPeople));
					
					      var view = new google.visualization.DataView(data);
					      view.setColumns([0, 1,
					                       { calc: "stringify",
					                         sourceColumn: 1,
					                         type: "string",
					                         role: "annotation" },
					                       2]);
					
					      var options = {
					    		  title: "Comparison of LivingPeople in Seoul sorted by Gu",
					    		  width: 1200,
					    	        height: 450,
					        bar: {groupWidth: "95%"},
					        legend: { position: "none" },
					      };
					      var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
					      chart.draw(view, options);
					  }
						
					    function drawChart(WorkingPeople) {
					      var data = google.visualization.arrayToDataTable(eval(WorkingPeople));
					
					      var view = new google.visualization.DataView(data);
					      view.setColumns([0, 1,
					                       { calc: "stringify",
					                         sourceColumn: 1,
					                         type: "string",
					                         role: "annotation" },
					                       2]);
					
					      var options = {
					    	title: "Comparison of WorkingPeople in Seoul sorted by Gu",
					    	width: 1200,
					        height: 450,
					        bar: {groupWidth: "95%"},
					        legend: { position: "none" },
					      };
					      var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
					      chart.draw(view, options);
					  }
					    
					    google.charts.load("current", {packages:['corechart']});
					    
					    function drawChart(MovingPeople) {
					      var data = google.visualization.arrayToDataTable(eval(MovingPeople));
					
					      var view = new google.visualization.DataView(data);
					      view.setColumns([0, 1,
					                       { calc: "stringify",
					                         sourceColumn: 1,
					                         type: "string",
					                         role: "annotation" },
					                       2]);
					
					      var options = {
					    	//title: "Comparison of MovingPeople in Seoul sorted by Gu",
					    	//if(drawChart(MovingPeople)) =  title: "Comparison of MovingPeople in Seoul sorted by Gu";
					        //else if(drawChart(LivingPeople)) = "Comparison of LivingPeople in Seoul sorted by Gu";
					        //else if(drawChart(WorkingPeople)) = "Comparison of WorkingPeople in Seoul sorted by Gu";
					        //else if(drawChart(TotalProfit)) = "Comparison of TotalProfit in Seoul sorted by Gu";,
					        width: 1100,
					        height: 450,
					        bar: {groupWidth: "95%"},
					        legend: { position: "none" },
					      };
					      var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
					      chart.draw(view, options);
					  }
					  </script>



			<body>
				<h2 align=center>한 눈에 보기</h2>
				<div>
					<script type="text/javascript">
							function ajaxReq(chartNum) {
								var xhttp = new XMLHttpRequest();
								xhttp.onreadystatechange = function(){
									if(this.readyState==4 & this.status==200){
										drawChart(this.responseText)
								}
							};
							var executeString
							if(chartNum == 1) executeString = "All/TotalProfit.jsp";
							else if(chartNum == 2) executeString = "All/LivingPeople.jsp";
							else if(chartNum == 3) executeString = "All/WorkingPeople.jsp";
							else if(chartNum == 4) executeString = "All/MovingPeople.jsp";
							else executeString = "cont?command=fail";		
							xhttp.open("Get",executeString, true);
							xhttp.send();
							}
						</script>

					<center>
						<button id="b1" onclick="ajaxReq(1)">행정구별 총 매출액</button>
						<button id="b2" onclick="ajaxReq(2)">행정구별 상주인구</button>
						<button id="b3" onclick="ajaxReq(3)">행정구별 직장인구</button>
						<button id="b4" onclick="ajaxReq(4)">행정구별 유동인구</button>
					</center>

					<center>
						<div id="columnchart_values"></div>
					</center>
				</div>
			</body>

		</div>

	</div>

	<script>
					// Get the modal
					var modal = document.getElementById('eyeModal');
					
					// Get the button that opens the modal
					var btn = document.getElementById("myBtn");
					
					// Get the <span> element that closes the modal
					var span = document.getElementsByClassName("close")[0];
					
					// When the user clicks the button, open the modal 
					btn.onclick = function() {
					    modal.style.display = "block";
					}
					
					// When the user clicks on <span> (x), close the modal
					span.onclick = function() {
					    modal.style.display = "none";
					}
					
					// When the user clicks anywhere outside of the modal, close it
					window.onclick = function(event) {
					    if (event.target == modal) {
					        modal.style.display = "none";
					    }
					}
					</script>






	<br>
	<br>
	<script type="text/javascript">
	
	
	var width = 900,
		height = 700;

	var svg = d3.select('body').append('svg')
				.attr('width',width)
				.attr('height',height);


	var map = svg.append('g').attr('id','map'),
		places = svg.append('g').attr('id','places');


	var projection = d3.geo.mercator()      //메르카르트 투영법
    	.center([126.9895, 37.5651])	      //센터 좌표
    	.scale(100000)					            //scale 
    	.translate([width/2, height/2]);    //좌표이동.
 
	var path = d3.geo.path().projection(projection); //path 만들고path 엘리먼트 사용하기 위함(다격형 그리기)
 


  	var features = topojson.feature(ko, ko.objects.seoul_municipalities_geo).features; //각 feautre 생성
	
  	//var tempVar;
 	map.selectAll("path")	//path 그리는듯.
      	.data(features) 	//features 갯수 만큼 
    	.enter().append("path")	//path 만들고
      	.attr("class", function(d) { 
      		 return "municipality c" + d.properties.code ;
      	})
      	.attr("id", function (d){
      			return d.properties.code;
      	})
      	.attr("d", path)
      	.attr('title', function(d){return d.properties.name}); //툴팁 텍스트.
      	
 
 	//지역별 텍스트 달아주기
  	map.selectAll("text")
      	.data(features)
    	.enter().append("text")
      	.attr("transform", function(d) {
      		 return "translate(" + path.centroid(d) + ")"; 
      	})
      	.attr("dy", ".35em")
      	.attr("class", "municipality-label")
     	.text(function(d) {
     	 return d.properties.name; 
     });

  	
   //마우스 호버 이벤트
    $('path').hover(
      //마우스 오버시
      function(event){
    	//$(this).css('stroke','#f00').css('stroke-width',2);
    	$(this).css('stroke','#f00').css('stroke-width',2);
    //	$(this).attr('onclick', 'alert(1000)');
     	 
    	svg.selectAll("path").sort(function (a, b) { // select the parent and sort the path's
      		if ('c'+a.properties.code == $(event.target).attr('class').split(' ')[1]){    
      			$(event.target).attr('id', a.properties.code);
      			return 1;  
      		}else{
            	return -1;
           }   //end of if
      	});//end of svg
      	
      },  //end of fun
      
      //마우스 아웃시
      function(event){
    	$(this).css('stroke','#fff');
     },	
    ); //end of hover
	
 $('path').click(function(){
	   // alert(this.id);
	   document.getElementById("myModal").style.display = "block";
	}
	
 );//end of click */

	function modelClose(){
		document.getElementById("myModal").style.display = "none";
	}
</script>

	<!-- Modal -->
	<div id="myModal" role="dialog">
		<div class="modal-dialog">
			Modal content
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						onclick="modelClose()">&times;</button>
					<h4 class="modal-title">Modal Header</h4>
				</div>
				<div class="modal-body">

					<p>여기에 한용오빠가 만든 modal 넣으면 됨</p>

				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal"
						onclick="modelClose()">Close</button>
				</div>
			</div>

		</div>
	</div>

</body>

</html>
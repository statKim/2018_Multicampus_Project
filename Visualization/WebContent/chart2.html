<!DOCTYPE html>
<html>
<head>
	<meta charset="EUC-KR">
	<title>chart1.html</title>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    		    
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      
      //google.charts.setOnLoadCallback(drawChart);

      function drawChart(data) {
    	data = eval(data);
        var data = google.visualization.arrayToDataTable( data );

    	 //차트의 타이틀
        var options = {
          title: 'My Daily Activities'
        };

    	//html의 특정tag 에 차트 그리기
    	//필요한 데이터는  사용될 데이터 + title 
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="piechart" style="width: 900px; height: 500px;"></div>
    
    <br><hr><br>
    <button onclick="ajaxReq()">차트 그리기 비동기 요청</button>
    
    <script type="text/javascript">
		function ajaxReq() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					drawChart(this.responseText);
				}
			};
			xhttp.open("GET", "chart2Res.jsp", true);
			xhttp.send();
		}
	</script>
  </body>
</html>










